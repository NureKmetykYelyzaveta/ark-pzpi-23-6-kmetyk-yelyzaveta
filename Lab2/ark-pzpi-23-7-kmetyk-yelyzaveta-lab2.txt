Міністерство освіти і науки України
Харківський національний університет радіоелектроніки
Кафедра програмної інженерії



Звіт
з лабораторної роботи №2
з дисципліни «Аналіз та рефакторінг коду»
на тему «Розробка бази даних для серверної частини системи та прикладного програмного інтерфейсу (API).»






Виконав:                                                                                              Перевірив:
ст. гр. ПЗПІ 23-7                                                                              Дашенков Д. С.
Кметик Єлизавета  Романівна









Харків 2025
     1 БУДОВА ПРОГРАМНОЇ СИСТЕМИ
     1.1 Архітектурні рішення для серверної частини системи

      Серверна частина програмної системи побудована на основі Node.js, що дозволяє реалізувати продуктивну, масштабовану та неблокуючу інфраструктуру для роботи з численними запитами персоналу притулку. Для забезпечення зручної організації логіки застосунку використовується фреймворк Express.js, який спрощує маршрутизацію, обробку запитів та інтеграцію з зовнішніми сервісами.
      База даних реалізована на основі SQLite, оскільки притулки здебільшого не мають розгалуженої інфраструктури, а дані зберігаються локально або на сервері в компактному форматі. SQLite забезпечує транзакційність, високу швидкість роботи та відсутність потреби в додатковому серверному ПЗ, що робить її ідеальним вибором для невеликих організацій.
      Для керування даними та взаємодії з таблицями використовується ORM-інструмент Sequelize, який дозволяє описувати структуру бази даних у вигляді моделей та забезпечує автоматизацію CRUD-операцій.
      Автентифікація користувачів реалізована за допомогою JSON Web Token (JWT). Це гарантує захист облікових записів персоналу та забезпечує обмеження доступу відповідно до ролей — наприклад, адміністратор може редагувати дані тварин, тоді як волонтер має доступ лише до перегляду.
      Для забезпечення обробки журналу змін, оновлень стану тварин та сповіщень у режимі реального часу система підтримує інтеграцію з WebSocket, що дозволяє відстежувати актуальні події без необхідності постійних повторних запитів.
      Клієнтська частина реалізована у вигляді вебінтерфейсу, створеного за допомогою HTML5, JavaScript та Tailwind CSS, що забезпечує адаптивність, швидкість та інтуїтивність роботи для користувачів різного рівня цифрової підготовки. Через вебінтерфейс персонал притулку може переглядати профілі тварин, створювати медичні записи, аналізувати графіки зміни стану, переглядати статистику та формувати звіти.
      Система розгортається на Google Cloud Platform (GCP), що гарантує стабільність та безперервність роботи. Хмарна інфраструктура дозволяє масштабувати ресурси у разі збільшення кількості тварин або розширення функціоналу.
      Загалом архітектура системи орієнтована на простоту розгортання, безпеку даних та високу доступність для всіх категорій працівників притулку.
      
      1.2 Моделі, що використовуються в системі
      Модель Animal (Тварина)
      Центральна сутність системи, яка містить ключову інформацію про кожну тварину, що проживає у притулку. До моделі входять дані про ім’я, вид, породу, вік, стать, вагу, особливості поведінки, історію станів та фото.
      Кожна тварина має зв’язок:
      • “один-до-багатьох” з медичними записами (MedicalRecord)
      • “один-до-багатьох” зі станами здоров'я (StateRecord)
      • “один-до-багатьох” з процедурами (Treatment)
      • “багато-до-одного” із користувачем, який вносив первинну інформацію
      Таким чином, модель Animal є основним елементом даних, на який спирається система моніторингу.
      
      Модель MedicalRecord (Медичний запис)
      Містить відомості про огляди, щеплення, діагностику, лікування та інші ветеринарні втручання.
      Поля включають:
      • тип процедури
      • дату проведення
      • лікаря/ветеринара
      • опис стану
      • рекомендації
      Зв’язки:
      • “багато-до-одного” з Animal
      • “багато-до-одного” з User (ветеринар або працівник)
      Медичні записи дозволяють оцінювати історію лікування та формують базу для аналітики.
      
      Модель StateRecord (Стан тварини)
      Відповідає за фіксацію змін у поведінці чи фізичному стані тварини. Це можуть бути позначки про апетит, температуру, активність, настрій, наявність симптомів тощо.
      Структура включає:
      • дату та час фіксації
      • короткий опис стану
      • категорію (норма / спостереження / критично)
      Зв’язки:
      • “багато-до-одного” з Animal
      • “багато-до-одного” з User
      Стан допомагає відстежувати динаміку здоров'я та своєчасно реагувати на зміни.
      
      Модель Treatment (Процедура)
      Представляє терапевтичні дії, які призначаються тварині:
      • прийом ліків
      • обробка від паразитів
      • план лікування
      • ранкова/вечірня процедура
      Зв’язки:
      • “багато-до-одного” з Animal
      • “один-до-багатьох” з MedicalRecord
      Використовується для створення систематичних планів догляду.
      
      Модель User (Користувач)
      Відображає працівників, волонтерів і ветеринарів притулку.
      Поля включають:
      • ім’я
      • електронну пошту
      • роль (адміністратор, ветеринар, доглядач, волонтер)
      • пароль (захищений)
      Користувач може:
      • створювати профілі тварин
      • вносити медичні записи
      • додавати нові стани тварин
      • переглядати статистику та сформовані звіти
      Зв’язки:
      • “один-до-багатьох” з Animal
      • “один-до-багатьох” з StateRecord
      • “один-до-багатьох” з MedicalRecord
      
      Модель Log (Журнал подій)
      Записує системні дії:
      • створення/редагування тварини
      • внесення медичних записів
      • зміну ролей користувачів
      • авторизацію
      Зв’язок:
      • “багато-до-одного” з User
      Це дозволяє контролювати діяльність персоналу та підтримувати прозорість роботи системи.
      
      Модель Role (Роль)
      Описує рівень доступу кожного користувача:
      • Administrator
      • Veterinarian
      • Worker
      • Volunteer
      Забезпечує правильне розмежування дозволів.


     2 UML ДІАГРАМА ПРЕЦЕДЕНТІВ ДЛЯ СЕРВЕРНОЇ ЧАСТИНИ СИСТЕМИ
     2.1 UML діаграма

Рисунок 2.1 - UML діаграма прецедентів

      2.2 Опис діаграми

      На діаграмі зображено основні ролі користувачів у системі моніторингу стану тварин у притулку та функції, які вони можуть виконувати.
      Адміністратор має найбільші повноваження. Він може керувати користувачами, призначати ролі, переглядати журнал подій, керувати партнерами та виконувати резервне копіювання бази даних. Адмін відповідає за загальну роботу системи та контроль усіх даних.
      Ветеринар працює з медичною інформацією. Він створює медичні записи, фіксує результати оглядів, призначає лікування, переглядає історію хвороб кожної тварини та отримує сповіщення про критичні стани. Його ключова функція — забезпечити медичний супровід тварин.
      Працівник притулку займається щоденними діями. Він додає нових тварин у систему, оновлює інформацію про них, записує зміни в стані, переглядає аналітику, формує звіти та отримує нагадування про процедури чи події. Працівник фактично веде щоденник кожної тварини.
      Усі користувачі можуть авторизуватися в системі через JWT, керувати своїм профілем та за потреби змінювати пароль.
      Зв’язки між сценаріями показують, що деякі дії залежать одна від одної. Наприклад, перегляд аналітики базується на записах про стани тварин, а зміна паролю пов’язана з керуванням профілем. Ветеринар може отримувати сповіщення, якщо під час оцінки стану виявлені критичні показники.
      Загалом діаграма відображає, як кожен учасник процесу взаємодіє з системою, та показує, що всі ключові функції притулку — догляд, лікування, контроль, аналітика та адміністрування — повністю покриті системою.


     3 ER ДІАГРАМА
     3.1 ER діаграма бази даних

Рисунок 3.1 - ER діаграма

      ER-діаграма відображає сім основних сутностей системи: Тварини, Медичні Записи, Стан Тварини, Призначення, Користувачі, Ролі та Журнал Подій. Центральною сутністю є Тварини, оскільки всі інші об’єкти зберігають інформацію про догляд та стан конкретної тварини. Кожна тварина має власну картку з основними характеристиками та може бути пов’язана з багатьма медичними записами, станами та процедурами.
      Користувачі взаємодіють із більшістю інших сутностей. Працівник або ветеринар може створювати медичні записи, фіксувати зміни у стані тварини та додавати нові призначення. Роль кожного користувача визначається через таблицю Ролі, яка встановлює тип доступу — адміністратор, ветеринар або доглядач. Крім того, система зберігає всі дії персоналу у таблиці Журнал Подій, де кожен запис пов’язаний із користувачем, який виконав відповідну операцію.
      Сутність Медичні Записи містить дані про огляди, щеплення, діагностику чи лікування, пов’язаних із конкретною твариною. Стан Тварини зберігає оперативні спостереження — зміни у поведінці, активності, апетиті або фізичному здоров’ї. Призначення містять деталі планового лікування чи процедур. Усі ці сутності мають зв’язок «багато-до-одного» з таблицею Тварини.
      Таким чином, ER-діаграма демонструє логічну структуру системи, у якій тварина є головним об’єктом обліку, а користувачі — основними суб’єктами взаємодії. Медичні записи, стани та призначення забезпечують повне документування догляду, тоді як ролі та журнали подій відповідають за контроль доступу та відстеження активності персоналу.


     4 БАЗА ДАНИХ ПРОГРАМНОЇ СИСТЕМИ
     4.1 Таблиці бази даних
      База даних системи складається з кількох основних таблиць, що відображають структуру інформації про тварин, медичні записи, стани, користувачів та адміністративні функції. Кожна таблиця відповідає певному аспекту роботи притулку й забезпечує цілісність і повноту даних.
      Таблиця Users зберігає інформацію про всіх користувачів системи: ім’я, електронну адресу, пароль, роль у системі (адміністратор, ветеринар чи працівник), а також службові дані, необхідні для авторизації та контролю доступу. Через поле RoleId кожен користувач пов’язаний із таблицею Roles, яка визначає його рівень прав.
      Animals містить дані про тварин, що перебувають у притулку: ім’я, вид, породу, вік, вагу, опис та фото. Кожна тварина пов’язана з певним користувачем (працівником), який її додав у систему, через поле UserId. Усі подальші записи про стан та лікування також посилаються на цю таблицю.
      Таблиця MedicalRecords відповідає за зберігання медичних даних: діагнозів, оглядів, щеплень, процедур та рекомендацій ветеринара. Вона містить зовнішні ключі AnimalId та UserId, які дозволяють визначити, до якої тварини належить запис і який користувач його створив.
      Таблиця StateRecords містить записи про щоденні стани тварини — активність, апетит, загальний настрій, наявність симптомів чи змін у поведінці. Подібно до медичних записів, вона пов’язана як із конкретною твариною, так і з користувачем, що здійснив фіксацію.
      Таблиця Treatments зберігає відомості про призначення та процедури, які повинні виконуватися для певної тварини: ліки, графік прийому, курс лікування тощо. Вона містить зовнішній ключ AnimalId і використовується у роботі ветеринарів та працівників.
      Таблиця Roles описує всі ролі системи та визначає можливості кожного типу користувачів. Вона пов’язана з таблицею Users і використовується під час авторизації та перевірки прав доступу.
      Logs зберігає історію дій користувачів: створення або зміну записів, авторизації, оновлення медичних карт або характеристик тварин. Це дозволяє підтримувати прозорість роботи та відстежувати всі важливі системні події.
      Таким чином, база даних побудована навколо головної сутності — тварини, навколо якої групуються медичні записи, стани, процедури та пов’язана діяльність користувачів. Така структура забезпечує прозорий і логічно зрозумілий механізм взаємодії між усіма об’єктами системи та дозволяє ефективно організувати облік і моніторинг тварин у притулку.


     5 ДІАГРАМА СТРУКТУРИ БД
5.1 Діаграма бази даних

Рисунок 5.1 - Схема бази даних
      База даних містить набір сутностей, що описують користувачів, їхніх тварин, медичні записи, зміни стану, процедури лікування та системні журнали дій. Центральною сутністю є таблиця Users, яка пов’язує більшість інших таблиць через зовнішні ключі.
      Таблиця Users містить дані про кожного користувача системи: ім’я, електронну пошту, хеш пароля та роль, яка визначає рівень доступу. Користувачі також пов’язані з кількома іншими сутностями системи: тваринами, медичними записами, записами стану, процедурами лікування та системними логами, що фіксують їхні дії (Див. додаток А.1).
      Таблиця Animals відповідає за зберігання інформації про тварин користувачів. Тут міститься назва тварини, вид, порода, вік, вага, фотографія та опис. Кожна тварина належить певному користувачу, що відображено через зовнішній ключ UserId, який пов’язує тварину з її власником.
      Стан здоров’я та поведінки тварин фіксується у двох окремих сутностях.
Таблиця MedicalRecords містить історію медичних оглядів: дату запису, діагноз, призначене лікування, а також зовнішні ключі на тварину (AnimalId) і користувача (UserId), який створив запис.
Таблиця StateRecords відображає зміну фізичного стану тварини, зокрема температуру, вагу та поведінкові особливості. Як і в медичних записах, кожен елемент пов’язаний з конкретною твариною та користувачем через відповідні зовнішні ключі.
      Для опису процедур і заходів лікування у системі існує таблиця Treatments. Вона містить тип лікування, дату проведення, опис та зовнішній ключ AnimalId, який визначає, якій тварині було проведено процедуру. Таким чином, Treatments є доповненням до медичних записів, розширюючи інформацію про історію догляду за твариною.
      Журнал змін і дій у системі реалізовано через таблицю Logs, у якій зберігаються дані про події: тип дії, час її виконання та користувач, що ініціював цю дію. Таблиця включає зовнішній ключ UserId, що дозволяє відстежувати операції кожного користувача та забезпечувати прозорість роботи системи.
      Система ролей реалізована через окрему таблицю Roles, яка містить ідентифікатор та назву ролі. Таблиця Users має зовнішній ключ RoleId, відповідно кожен користувач однозначно пов’язаний з певною роллю. Це забезпечує підтримку різних рівнів доступу до функціоналу системи.
      Таким чином, база даних має чітку структуру, у якій всі сутності логічно пов’язані між собою через систему зовнішніх ключів. Ядром структури є користувач і його тварини, а навколо них — медична інформація, записи стану, процедури лікування та журнали дій. Така архітектура забезпечує цілісність даних та зручність у подальшому масштабуванні.


6 РОЗРОБИТИ ФУНКЦІЇ РОБОТИ З БД

6.1 Методи доступу до БД
      Для взаємодії з базою даних у програмній системі розроблено набір методів, що забезпечують створення, читання, оновлення та видалення даних (CRUD-операції). Усі методи виконуються через підключення до SQLite, що забезпечує локальне зберігання даних і простоту інтеграції в застосунок.
      Основою доступу до бази даних є створення єдиного підключення за допомогою SQLite API. Для роботи з БД використовується стандартний механізм виконання SQL-запитів через SQLiteConnection, SQLiteCommand та SQLiteDataReader.
      Методи доступу до БД поділяються на кілька груп відповідно до логічних сутностей системи:
      1. Методи роботи з користувачами (Users)
• створення нового користувача;
• пошук користувача за email або Id;
• авторизація (перевірка пароля);
• отримання ролі користувача;
• оновлення даних профілю.
      Ці методи дозволяють забезпечити реєстрацію користувачів, їх авторизацію та подальше керування обліковими записами.
      2. Методи роботи з тваринами (Animals)
• додавання нової тварини;
• отримання списку тварин;
• завантаження повної картки тварини;
• оновлення її параметрів;
• видалення тварини з бази.
      Завдяки цим функціям працівники притулку можуть вести цифрові картки тварин і підтримувати актуальність інформації.
      3. Методи роботи з медичними записами (MedicalRecords)
• додавання нового медичного запису;
• вибірка всіх медичних записів тварини;
• отримання запису за Id;
• оновлення медичного запису.
      Методи забезпечують роботу ветеринара з історією лікувань.
      4. Методи роботи зі станами тварини (StateRecords)
• фіксація нового стану;
• перегляд історії станів;
• пошук критичних станів;
• фільтрація за датами.
      Ці функції дозволяють аналізувати зміни у здоров’ї та поведінці.
      5. Методи роботи з призначеннями (Treatments)
• додавання нового призначення;
• отримання призначень певної тварини;
• оновлення даних лікування;
• завершення / видалення призначення.
      6. Методи роботи з журналом подій (Logs)
• запис дій користувача в журнал;
• перегляд історії змін;
• фільтрація подій за користувачем або датою.
      Журнал дозволяє контролювати дії персоналу та забезпечує прозорість роботи системи.
      7. Методи загального призначення
      До цієї групи належать:
• відкриття та закриття з’єднання;
• обробка помилок бази даних;
• транзакції для операцій, що складаються з кількох SQL-запитів.
      
      Підсумок
      Усі методи доступу до БД побудовані на базі стандартних SQL-запитів та забезпечують повноцінну взаємодію між застосунком та базою даних. Логічна структуризація методів дозволяє легко підтримувати, розширювати та тестувати програмну систему, а використання SQLite гарантує швидку роботу та надійне зберігання інформації.
        


7 РОЗРОБКА API ДЛЯ СЕРВЕРНОЇ ЧАСТИНИ

      7.1 Тип API, що буде використовуватися
      Для взаємодії між клієнтською частиною та сервером використовується REST API, який дозволяє виконувати стандартні операції над ресурсами системи за допомогою HTTP-методів (GET, POST, PUT, DELETE).
Обмін даними здійснюється у форматі JSON, що забезпечує легкість інтеграції з веб- та мобільними застосунками.
      Авторизація користувачів реалізована через JWT-токени. Після успішного входу клієнт отримує токен, який необхідно надсилати в заголовках всіх захищених запитів.
      Нижче наведено опис основних контролерів і доступних ендпоінтів серверної частини.
      
      AuthController
      Відповідає за реєстрацію та авторизацію користувачів системи.
      POST /api/auth/register
      Реєстрація нового користувача (приймає UserRegistrationDto).
      POST /api/auth/login
      Авторизація. Повертає JWT-токен у разі успішного входу.
      
      AnimalsController
      Реалізує CRUD-операції для сутності «тварини» у притулку.
      GET /api/animals
      Отримати список усіх тварин.
      GET /api/animals/{id}
      Отримати картку конкретної тварини.
      POST /api/animals
      Створити новий запис про тварину (через CreateAnimalDto).
      PUT /api/animals/{id}
      Оновити дані тварини.
      DELETE /api/animals/{id}
      Видалити тварину з бази.
      
      MedicalRecordsController
      Керує медичними записами — оглядами, щепленнями, діагностикою.
      GET /api/medical/{animalId}
      Отримати всі медичні записи певної тварини.
      POST /api/medical
      Додати новий медичний запис (CreateMedicalRecordDto).
      PUT /api/medical/{id}
      Оновити медичний запис.
      
      StateRecordsController
      Відповідає за фіксацію щоденного стану тварин.
      GET /api/state/{animalId}
      Отримати історію станів тварини.
      POST /api/state
      Створити новий запис стану (CreateStateRecordDto).
      GET /api/state/critical
      Отримати список тварин у критичному стані.
      
      TreatmentsController
      Керує призначеннями (лікуванням).
      GET /api/treatments/{animalId}
      Отримати всі призначення для тварини.
      POST /api/treatments
      Додати нове лікування (CreateTreatmentDto).
      PUT /api/treatments/{id}
      Оновити лікування.
      DELETE /api/treatments/{id}
      Скасувати призначення.
      
      UsersController
      Використовується для керування персоналом та ролями.
      GET /api/users
      Отримати список користувачів (для адміністратора).
      GET /api/users/{id}
      Отримати профіль користувача.
      PUT /api/users/{id}
      Оновити інформацію про користувача.
      
      LogsController
      Дозволяє переглядати журнал системних подій.
      GET /api/logs
      Отримати всі події (для адміністратора).
      GET /api/logs/user/{userId}
      Отримати події конкретного користувача.
      
      Структура DTO
      Для передачі даних між клієнтом і сервером використовуються DTO-класи, які визначають структуру запитів і відповідей.
      DTO дозволяють:
      • приховати внутрішню структуру моделі,
      • передавати лише потрібні поля,
      • підвищити безпеку API,
      • зменшити трафік.
      Приклади DTO:
      CreateAnimalDto, CreateMedicalRecordDto, CreateStateRecordDto, UserRegistrationDto, UserLoginDto, CreateTreatmentDto тощо.


8 СПЕЦИФІКАЦІЯ РОЗРОБЛЕНОГО API
      8.1 Специфікація API системи ShelterMonitor
Тварини — AnimalsController

GET /api/animals
Опис:
Отримання списку всіх тварин, що перебувають у притулку.
Відповідь (200 OK):
[
  {
    "Id": 1,
    "Name": "Барсик",
    "Type": "Cat",
    "Breed": "British Shorthair",
    "Age": 3,
    "Weight": 4.5,
    "Description": "Дуже лагідний кіт",
    "PhotoURL": "https://example.com/photo.jpg",
    "UserId": 1
  }
]

GET /api/animals/{id}
Опис:
Отримати детальну інформацію про конкретну тварину.
Відповідь (200 OK):
{
  "Id": 1,
  "Name": "Барсик",
  "Type": "Cat",
  "Breed": "British Shorthair",
  "Age": 3,
  "Weight": 4.5,
  "Description": "Дуже лагідний кіт",
  "PhotoURL": "https://example.com/photo.jpg",
  "UserId": 1
}

POST /api/animals
Опис:
Додавання нової тварини у систему притулку.
Тіло запиту:
{
  "Name": "Барсик",
  "Type": "Cat",
  "Breed": "British Shorthair",
  "Age": 3,
  "Weight": 4.5,
  "Description": "Дуже лагідний кіт",
  "PhotoURL": "https://example.com/photo.jpg",
  "UserId": 1
}
Відповідь (201 Created):
{
  "message": "Animal created successfully",
  "id": 5
}

PUT /api/animals/{id}
Опис:
Оновлення інформації про тварину.
Тіло запиту:
{
  "Name": "Барсик",
  "Type": "Cat",
  "Breed": "British Shorthair",
  "Age": 3,
  "Weight": 4.5,
  "Description": "Дуже лагідний кіт",
  "PhotoURL": "https://example.com/photo.jpg",
  "UserId": 1
}
Відповідь (204 No Content):
Інформація успішно оновлена.

DELETE /api/animals/{id}
Опис:
Видалення тварини з бази даних притулку.
Відповідь (204 No Content):
Тварину успішно видалено.



9 ПЕРЕВІРКА РОБОТИ СТВОРЕННОГО КОДУ
9.1 Тестування розроблених функцій

Рис. 9.1 — Демонстрація відповіді методу GET /api/animals у Swagger UI


Рис. 9.2 — Робота методу POST /api/animals (створення нової тварини) у Swagger UI


Рис. 9.3 — Робота методу GET /api/animals/{id} (отримання даних про конкретну тварину) у Swagger UI


Рис. 9.4 — Виклик методу POST /api/users (додавання нового користувача) у Swagger UI


Рис. 9.5 — Виклик методу PUT /api/animals/{id} (оновлення даних тварини) у Swagger UI

Рис. 9.6 — Виклик методу DELETE /api/animals/{id} (видалення тварини) у Swagger UI


ДОДАТОК А
А.1 Код таблиць бази даних:

PRAGMA foreign_keys = ON;

1. Таблиця ролей
CREATE TABLE Roles (
    Id INTEGER PRIMARY KEY AUTOINCREMENT,
    Name TEXT NOT NULL
);

2. Таблиця користувачів
CREATE TABLE Users (
    Id INTEGER PRIMARY KEY AUTOINCREMENT,
    Name TEXT NOT NULL,
    Email TEXT UNIQUE NOT NULL,
    Password TEXT NOT NULL,
    RoleId INTEGER NOT NULL,
    FOREIGN KEY (RoleId) REFERENCES Roles(Id)
);

3. Таблиця тварин
CREATE TABLE Animals (
    Id INTEGER PRIMARY KEY AUTOINCREMENT,
    Name TEXT NOT NULL,
    Type TEXT NOT NULL,
    Breed TEXT,
    Age INTEGER,
    Weight REAL,
    Description TEXT,
    PhotoURL TEXT,
    UserId INTEGER NOT NULL,
    FOREIGN KEY (UserId) REFERENCES Users(Id)
);

4. Медичні записи
CREATE TABLE MedicalRecords (
    Id INTEGER PRIMARY KEY AUTOINCREMENT,
    Date TEXT NOT NULL,
    Procedure TEXT NOT NULL,
    Notes TEXT,
    AnimalId INTEGER NOT NULL,
    UserId INTEGER NOT NULL,
    FOREIGN KEY (AnimalId) REFERENCES Animals(Id),
    FOREIGN KEY (UserId) REFERENCES Users(Id)
);

5. Стан тварини
CREATE TABLE StateRecords (
    Id INTEGER PRIMARY KEY AUTOINCREMENT,
    Date TEXT NOT NULL,
    State TEXT NOT NULL,
    Severity TEXT,
    AnimalId INTEGER NOT NULL,
    UserId INTEGER NOT NULL,
    FOREIGN KEY (AnimalId) REFERENCES Animals(Id),
    FOREIGN KEY (UserId) REFERENCES Users(Id)
);

6. Призначення (лікування)
CREATE TABLE Treatments (
    Id INTEGER PRIMARY KEY AUTOINCREMENT,
    Type TEXT NOT NULL,
    Description TEXT,
    AnimalId INTEGER NOT NULL,
    FOREIGN KEY (AnimalId) REFERENCES Animals(Id)
);

7. Журнал подій
CREATE TABLE Logs (
    Id INTEGER PRIMARY KEY AUTOINCREMENT,
    Action TEXT NOT NULL,
    Timestamp TEXT NOT NULL,
    UserId INTEGER NOT NULL,
    FOREIGN KEY (UserId) REFERENCES Users(Id)
);


ДОДАТОК Б
Посилання на код
https://github.com/NureKmetykYelyzaveta/ark-pzpi-23-6-kmetyk-yelyzaveta
